BUILDPATH=build/

#C++ flags
CC=g++
CFLAGS=-std=c++0x
LDFLAGS=-lgfortran -llapackpp -I /usr/local/include/lapackpp/

#CXXTEST
CXXTESTPATH=cxxtestgen
CXXTESTFLAGS=--error-printer
CCCXXLDFLAGS=

clean:
	rm build/*.o -f
	rm build/*TestRunner -f
	rm build/*TestRunner.cpp -f

all: LogisticRegression.cpp.o MultipleLogisticRegression.cpp.o SimpleLogisticRegression.cpp.o

alltest: all SimpleLogisticRegressionTestRunner MultipleLogisticRegressionTestRunner

%.cpp.o: src/serial/%.cpp
	$(CC) -c $(CFLAGS) $(LDFLAGS) $< -o $(BUILDPATH)$@

%TestRunner: test/serial/%Test.cpp %.cpp.o LogisticRegression.cpp.o 
	$(CXXTESTPATH) $(CXXTESTFLAGS) $< -o $(BUILDPATH)$@.cpp
	$(CC) $(BUILDPATH)$@.cpp $(CFLAGS) $(LDFLAGS) $(CCCXXLDFLAGS) $(BUILDPATH)LogisticRegression.cpp.o $(BUILDPATH)$*.cpp.o  -o $(BUILDPATH)$@
